<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registration form</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.js"
      integrity="sha256-bd8XIKzrtyJ1O5Sh3Xp3GiuMIzWC42ZekvrMMD4GxRg="
      crossorigin="anonymous"
    ></script>
    <style>
      body {
        background-color: brown;
      }
      .container {
        border: 5px solid blue;
        height: 1000px;
        width: 70%;
        background-color: white;
        margin: 5% 0% 5% 15%;
        border-radius: 20px;
      }
      .fromContainer {
        margin: 5%;
        height: 600px;
      }

      .row {
        padding: 2%;
      }

      .inptlabels {
        font-size: 22px;
        font-family: monospace;
        margin-top: 5px;
        font-weight: 500;
      }

      .inputfield {
        width: 70%;
        height: 35px;
        background-color: lightgrey;
        border: none;
        border-radius: 8px;
        font-size: 20px;
        padding: 11px;
      }

      .inputbtn {
        margin-top: 10px;
        width: 100px;
        height: 41px;
        background-color: blue;
        color: white;
        font-size: 22px;
        border: noe;
        border: none;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <button onclick="getcontacts()" class="btn">get contacts</button>

    <table class="table" style="margin: 5%; background: white;">
      <thead class="thead-dark">
        <tr>
          <th scope="col">FirstName</th>
          <th scope="col">LastName</th>
          <th scope="col">DOB</th>
          <th scope="col">Email</th>
          <th scope="col">Gender</th>
          <th scope="col">PhoneNumber</th>
        </tr>
      </thead>
      <tbody id="tabledata"></tbody>
    </table>

    <div class="container">
      <div class="row">
        <div class="col-sm-4">
          <img
            src="http://getwallpapers.com/wallpaper/full/8/7/3/651927.jpg"
            width="100"
            height="100"
          />
        </div>
        <div class="col-sm-8">
          <h1>Register Yourself</h1>
        </div>
      </div>

      <div class="fromContainer">
        <div class="row">
          <div class="col-sm-6">
            <label class="inptlabels">First Name</label> <br />
            <input
              class="inputfield"
              type="text"
              id="Firstname"
              name="Firstname"
              onkeyup="HideErrorMsg('errMsgFname')"
            /><br />
            <span id="errMsgFname"></span>
          </div>
          <div class="col-sm-6">
            <label class="inptlabels">Last Name </label> <br />
            <input
              class="inputfield"
              type="text"
              id="Lastname"
              name="Lastname"
            />
          </div>
        </div>

        <div class="row">
          <div class="col-sm-6">
            <label class="inptlabels">Date Of Birth</label> <br />
            <input class="inputfield" type="Date" id="Bday" name="Bday" />
          </div>
          <div class="col-sm-6">
            <label class="inptlabels">Gender</label> <br />
            <input type="radio" id="Male" name="Male" />
            <label class="inptlabels">Male</label><br />
            <input type="radio" id="Female" name="Female" />
            <label class="inptlabels">Female</label>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-6">
            <label class="inptlabels">Eamil</label> <br />
            <input
              class="inputfield"
              type="text"
              id="Eamil"
              name="Eamil"
              onkeyup="HideErrorMsg('errMsgEmail')"
            /><br />
            <span id="errMsgEmail"></span>
          </div>
          <div class="col-sm-6">
            <label class="inptlabels">Phone Number </label> <br />
            <input
              class="inputfield"
              type="text"
              id="PhoneNumber"
              name="PhoneNumber"
              onkeyup="HideErrorMsg('errMsgPhone')"
            /><br />
            <span id="errMsgPhone"></span>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-12">
            <label class="inptlabels">Choose Subject</label> <br />
            <select class="inputfield" style="height: 40px;" id="sub">
              <option>--None--</option>
              <option value="DSA">Data Structure and algoritham</option>
              <option value="Java"> Programing in Java </option>
              <option value="Python"> Programing in Python</option>
              <option value=".NET"> Programing in .NET</option>
            </select>
            <br />
            <input type="Checkbox" />
            <label class="inptlabels"
              >Please agree to
              <a href="https://google.com" target="_blank"
                >tearms and conditions</a
              ></label
            >
            <br />
            <button class="inputbtn" onclick="Vlidate()">Sumit</button>
          </div>
        </div>

        <script>
          function Vlidate() {
            var validationpased = true;
            var Firstname = document.getElementById("Firstname").value;
            var Lastname = document.getElementById("Lastname").value;
            var DOB = document.getElementById("Bday").value;
            var Male = document.getElementById("Male").checked;
            var female = document.getElementById("Female").checked;
            var Eamil = document.getElementById("Eamil").value;
            var PhoneNumber = document.getElementById("PhoneNumber").value;
            var subject = document.getElementById("sub").value;
            /*
          console.log("Firstname = " + Firstname);
          console.log("Lastname = " + Lastname);
          console.log("Bday = " + Bday);
          console.log("Male = " + Male);
          console.log("female = " + female);
          console.log("Eamil = " + Eamil);
          console.log("PhoneNumber = " + PhoneNumber);  */
            // console.log("subject =" + subject);
            if (!Firstname) {
              validationpased = false;
              document.getElementById("errMsgFname").style.display = "block";
              document.getElementById("errMsgFname").innerHTML =
                "Please eneter First Name";
              document.getElementById("errMsgFname").style.fontSize = "20px";
              document.getElementById("errMsgFname").style.color = "red";
            }

            if (!Eamil) {
              document.getElementById("errMsgEmail").style.display = "block";
              document.getElementById("errMsgEmail").innerHTML =
                "Please Enter Email";
              document.getElementById("errMsgEmail").style.fontSize = "20px";
              document.getElementById("errMsgEmail").style.color = "red";
            } else if (!ValidateEmail(Eamil)) {
              document.getElementById("errMsgEmail").style.display = "block";
              document.getElementById("errMsgEmail").innerHTML =
                "Please Enter valid  Email";
              document.getElementById("errMsgEmail").style.fontSize = "20px";
              document.getElementById("errMsgEmail").style.color = "red";
            }

            if (!PhoneNumber) {
              document.getElementById("errMsgPhone").style.display = "block";
              document.getElementById("errMsgPhone").innerHTML =
                "Please Enter Phone Number";
              document.getElementById("errMsgPhone").style.fontSize = "20px";
              document.getElementById("errMsgPhone").style.color = "red";
            }
            if (isNaN(PhoneNumber) || PhoneNumber.length < 10) {
              document.getElementById("errMsgPhone").style.display = "block";
              document.getElementById("errMsgPhone").innerHTML =
                "Please Enter Valid Phone Number";
              document.getElementById("errMsgPhone").style.fontSize = "20px";
              document.getElementById("errMsgPhone").style.color = "red";
            }
            if (validationpased) {
              alert("test");
              var parms = {
                FirstName: Firstname,
                LastName: Lastname,
                DOB: DOB,
                Email: Eamil,
                Gender: "Male",
                Phonenumber: PhoneNumber,
              };

              const PostContactUrl = "http://127.0.0.1:5000/contact";
              axios
                .post(PostContactUrl, parms)
                .then((res) => {
                  alert(res);
                })
                .catch((err) => alert(err));
            }
          }

          function ValidateEmail(mail) {
            if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(mail)) {
              return true;
            }
            return false;
          }

          function HideErrorMsg(val) {
            document.getElementById(val).style.display = "none";
          }

          function getcontacts() {
            const getContactUrl = "http://127.0.0.1:5000/contact";
            axios
              .get(getContactUrl)
              .then((res) => {
                console.log(res);
                tablebody = document.getElementById("tabledata");
                for (var i = 0; i < res.data.list.length; i++) {
                  var tr = document.createElement("tr");
                  var FirstName = document.createElement("td");
                  var LastName = document.createElement("td");
                  var DOB = document.createElement("td");
                  var Email = document.createElement("td");
                  var Gender = document.createElement("td");
                  var PhoneNumber = document.createElement("td");
                  FirstName.innerHTML = res.data.list[i].FirstName;
                  LastName.innerHTML = res.data.list[i].LastName;
                  DOB.innerHTML = res.data.list[i].DOB;
                  Email.innerHTML = res.data.list[i].Email;
                  Gender.innerHTML = res.data.list[i].Gender;
                  PhoneNumber.innerHTML = res.data.list[i].PhoneNumber;
                  tr.appendChild(FirstName);
                  tr.appendChild(LastName);
                  tr.appendChild(DOB);
                  tr.appendChild(Email);
                  tr.appendChild(Gender);
                  tr.appendChild(PhoneNumber);
                  tablebody.appendChild(tr);
                }
              })
              .catch((err) => alert(err));
          }
        </script>

        <!-- 
<label for="cars">Choose a car:</label>
    <select  name="cars" id="cars">
    <optgroup label="Swedish Cars">
      <option value="volvo">Volvo</option>
      <option value="saab">Saab</option>
  </optgroup>
    <optgroup label="German Cars">
    <option value="mercedes">Mercedes</option>
    <option value="audi">Audi</option>
  </optgroup>
<optgroup label="Indian Cars">
<option value="TATA">TATA</option>
<option value="Maruti">Maruti</option>
<option value="Mahinda">Mahindra</option>
  </optgroup>
</select>
-->
      </div>
    </div>
  </body>
</html>
